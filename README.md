# P2P-Chat-NASM
✨ 纯 NASM x64 汇编实现的去中心化P2P局域网聊天系统 | 原生完美支持中文+全Unicode无乱码 | Windows 原生运行

## ✨ 项目简介
一款基于**纯NASM x86_64汇编语言**开发的轻量化P2P局域网聊天程序，无中心服务器、无第三方依赖、纯内存运行无磁盘残留，编译后体积仅 **≤15KB**，内存占用 ≤5M。
原生支持 **UTF-8/Unicode 全字符集**，彻底解决中文乱码问题，完美显示中文/繁体/日文/韩文/特殊符号，是汇编语言实战开发的完整项目。

## 🚀 核心特性 (v0.7 终极完整版)
✅ 【原生中文支持】UTF-8编码强制锁定 + 全量Windows宽字符(Unicode)API，中文输入/显示/托盘提示**零乱码**
✅ 【去中心化P2P】纯点对点通信，无中心服务器，局域网内自动发现在线节点
✅ 【双协议通信】TCP 点对点私聊 + UDP 组播广播，消息全覆盖
✅ 【全局快捷键】`WIN+J` 一键切换窗口显示/隐藏，全局生效（无论窗口是否前台）
✅ 【新消息提醒】托盘气泡弹窗提示(中文标题+内容) + Kiko系统提示音，窗口隐藏也能感知
✅ 【安全加密】RC4流加密通信，消息防嗅探、防破解，中文Unicode字符加密无损耗
✅ 【超长消息】自动分片发送+重组接收，无消息长度限制
✅ 【断线重连】TCP连接断开后自动重试连接，无需重启程序
✅ 【防风暴机制】节点发现阶段随机延时，避免局域网广播风暴
✅ 【轻量化】编译后体积 ≤15KB，纯内存运算，无注册表/无残留/无第三方依赖
✅ 【全兼容】Windows 10/11 x64 原生运行，无需安装任何运行库

## 🛠️ 编译与运行 (Windows)
### 环境准备
1. 安装 **NASM 汇编器** (x64版本)，并将NASM添加到系统环境变量`PATH`
2. 安装 **Visual Studio Build Tools** (仅需安装C++编译工具链，获取`link.exe`链接器)

### 一键编译
1. 下载本项目所有文件，保持目录结构不变
2. 双击根目录的 `build.bat` 批处理脚本
3. 等待编译完成，根目录会生成 `P2P_Chat_v07.exe` 可执行文件
4. 双击 `P2P_Chat_v07.exe` 直接运行，无需任何配置

## 🎯 功能使用说明
1. 程序启动后自动探测局域网内在线节点，显示节点IP和在线数量
2. 输入框直接输入**中文/英文**消息，回车即可发送TCP私聊消息
3. 组播消息会推送给局域网内所有在线节点
4. 按 `WIN+J` 可一键隐藏窗口到系统托盘，再次按下显示窗口
5. 收到新消息时，托盘弹出气泡提示并播放Kiko提示音
6. 窗口隐藏时，点击托盘图标也可恢复窗口显示

## 📦 技术栈
- 开发语言：NASM x86_64 汇编语言 (纯汇编，无C/C++混合)
- 编译工具：NASM + Microsoft Link
- 核心API：Windows Win32 API (宽字符版) + Winsock2 网络API + Shell32 托盘API + Winmm 声音API
- 编码：UTF-8 + UTF-16 LE (Unicode)
- 加密：RC4 流加密算法

## 📝 版本更新日志
详见项目根目录 [CHANGELOG.md](CHANGELOG.md)

## 📄 开源协议
本项目采用 **MIT 开源协议** - 详见 [LICENSE](LICENSE)，你可以自由使用、修改、分发本项目的代码，无需授权。

## 💡 注意事项
1. 仅支持 Windows 10/11 x64 系统，不支持32位系统
2. 运行时请确保防火墙允许程序的网络访问（TCP/UDP 8888/8889端口）
3. 纯局域网通信，无需联网，节点发现仅在局域网内生效
